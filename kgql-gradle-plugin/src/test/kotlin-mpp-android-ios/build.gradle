plugins {
    id 'org.jetbrains.kotlin.multiplatform'
    id 'com.android.library'
    id 'kotlinx-serialization'
    id 'com.codingfeline.kgql'
}

repositories {
    maven {
        url "file://${projectDir.absolutePath}/../../../../build/localMaven"
    }
    mavenCentral()
    google()
    jcenter()
//    maven { url 'https://dl.bintray.com/kotlin/kotlinx' }
}

android {
    compileSdkVersion libs.versions.compileSdk.get() as int

    lintOptions {
        textReport true
    }

    sourceSets {
        main {
            manifest.srcFile 'src/androidMain/AndroidManifest.xml'
        }
    }
}

kgql {
    packageName = "com.sample"
    typeMapper = [
            "UserProfile": "com.sample.data.UserProfile"
    ]
}

kotlin {

    android()
    js(IR) {
        browser()
        nodejs()
    }
    ios()
    sourceSets {
        commonMain {
            dependencies {
                implementation libs.kotlin.serialization.json
            }
        }
        androidMain {
            dependencies {
            }
        }
        jsMain {
            dependencies {
            }
        }
        iosMain {
            dependencies {
            }
        }
        iosTest {}
    }
}
