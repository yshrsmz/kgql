apply plugin: 'com.github.ben-manes.versions'

buildscript {
    apply from: "$rootDir/gradle/dependencies.gradle"

    repositories {
        mavenCentral()
        google()
        jcenter()
        gradlePluginPortal()

        dependencies {
            classpath deps.plugins.kotlin
            classpath deps.plugins.serialization
            classpath deps.plugins.dokka
            classpath deps.plugins.android
            classpath deps.plugins.versions
            classpath deps.plugins.pluginPublish
        }
    }
}


allprojects {
    repositories {
        google()
        mavenCentral()
        jcenter()
    }

    group = GROUP
    version = VERSION_NAME
}

wrapper {
    gradleVersion = '6.6'
    distributionType = Wrapper.DistributionType.ALL
}

// Workaround for https://youtrack.jetbrains.com/issue/KT-36721.
// Put this snippet into your root buildscript.
allprojects {
    pluginManager.withPlugin("kotlin-multiplatform") {
        def uniqueName = "${project.group}.${project.name}".toString()

        project.kotlin.targets.withType(org.jetbrains.kotlin.gradle.plugin.mpp.KotlinNativeTarget.class) {
            compilations["main"].kotlinOptions.freeCompilerArgs += ["-module-name", uniqueName]
        }
    }
}